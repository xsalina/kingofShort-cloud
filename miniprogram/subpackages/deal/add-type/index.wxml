<view class="container">
  
  <view class="card add-card">
    <view class="card-title">新增股票类型</view>
    
    <view class="form-item">
      <text class="label">名称/代码</text>
      <input 
        class="input" 
        placeholder="例如：AAPL 或 腾讯控股" 
        placeholder-class="placeholder"
        model:value="{{inputName}}" 
        maxlength="20"
      />
    </view>

    <view class="form-item">
      <text class="label">选择市场</text>
      <view class="market-selector">
        <block wx:for="{{marketOptions}}" wx:key="code">
          <view 
            class="market-chip {{editingIndex === index ? 'active ' + item.code : ''}}" 
            bindtap="onMarketChange" 
            data-index="{{index}}"
          >
            <text>{{item.market}}</text>
            <text class="chip-currency">{{item.code}}</text>
          </view>
        </block>
      </view>
    </view>

    <button class="btn-add {{isAdding ? 'btn-disabled' : ''}}" loading="{{isAdding}}"
      disabled="{{isAdding}}" bindtap="addType" >{{isAdding ? '添加中...' : '确认添加'}}</button>
  </view>

  <view class="list-title">已添加列表 ({{stockList.length}})</view>
  
  <view class="stock-list">
    <block wx:for="{{stockList}}" wx:key="id">
      <view class="card stock-item">
        <view class="item-left">
          <view class="stock-name">{{item.name}}</view>
          <view class="stock-tags">
            <view class="tag market-tag {{item.code}}">{{item.market}}</view>
            <view class="tag currency-tag">{{item.code}}</view>
          </view>
        </view>

        <view class="item-right" bindtap="deleteStock" data-id="{{item._id}}">
          <text class="delete-icon">✕</text>
        </view>
      </view>
    </block>

    <view wx:if="{{stockList.length === 0}}" class="empty-state">
      暂无自选股票名称，请在上方添加
    </view>
  </view>

</view>