<view class="container" style="transform: translateY({{keyboardHeight > 0 ? -(keyboardHeight / 4) : 0}}px);">
  <view class="card stock-section">
    <view class="section-header-row">
      <view class="section-title">åç§°</view>
      <view class="link-btn" bindtap="onAddType" wx:if="{{userInfo.userId}}">
        æ‰¾ä¸åˆ°? å»æ·»åŠ 
        <text class="arrow">></text>
      </view>
    </view>
    <picker bindchange="onStockChange" value="{{selectedStockIndex}}" range="{{userInfo.userId ? stockOptions : unRegisterTypes}}" range-key="name">
      <view class="picker-row">
        <view class="picker-val {{selectedStockObj !== null ? 'active' : ''}}">
          {{selectedStockObj !== null ? selectedStockObj.name : 'è¯·ç‚¹å‡»é€‰æ‹©è®°å½•åç§°'}}
        </view>
        <view class="picker-tag {{selectedStockObj.code}}" wx:if="{{selectedStockObj !== null}}">
          {{selectedStockObj.market}} {{selectedStockObj.currency}}
        </view>
        <view class="picker-arrow" wx:else>â–¼</view>
      </view>
    </picker>
  </view>
  <view class="card form-section">
    <view class="section-title-simple">ä¹°å…¥è¯¦æƒ…</view>
    <view class="form-row">
      <view class="form-col">
        <text class="label">ä¹°å…¥ä»·æ ¼</text>
        <view class="input-wrap">
          <text class="prefix">{{selectedStockObj ? selectedStockObj.currency : ''}}</text>
          <input class="input" type="digit" placeholder="0.00" value="{{price}}" data-field="price" bindinput="onInput" />
        </view>
      </view>
      <view class="form-col">
        <text class="label">ä¹°å…¥æ•°é‡</text>
        <view class="input-wrap">
          <input class="input" type="digit" placeholder="0" value="{{qty}}" data-field="qty" bindinput="onInput" />
          <text class="suffix">è‚¡</text>
        </view>
      </view>
    </view>
    <view class="form-row mt-30">
      <view class="form-col">
        <text class="label">æ€»æ‰‹ç»­è´¹</text>
        <view class="input-wrap">
          <text class="prefix">{{selectedStockObj ? selectedStockObj.currency : ''}}</text>
          <input class="input" type="digit" placeholder="0.00" value="{{buyfee}}" data-field="buyfee" bindinput="onInput" />
        </view>
      </view>
      <view class="form-col">
        <text class="label">ç›®æ ‡æ”¶ç›Šç‡</text>
        <view class="input-wrap">
          <input class="input" type="digit" placeholder="10" value="{{rate}}" data-field="rate" bindinput="onInput" />
          <text class="suffix">%</text>
        </view>
      </view>
    </view>
  </view>
  <view class="card result-card {{suggestedSellPrice > 0 ? 'active' : ''}}">
    <view class="result-header">
      <text class="icon">ğŸ¯</text>
      <text>ç›®æ ‡ç­–ç•¥</text>
    </view>
    <view class="result-body row-between">
      <view class="result-item">
        <text class="res-label">å»ºè®®å–å‡ºä»·</text>
        <text class="res-num text-primary">
          {{selectedStockObj.currency || ''}}{{suggestedSellPrice || '0.00'}}
        </text>
      </view>
      <view class="divider"></view>
      <view class="result-item text-right">
        <text class="res-label">é¢„è®¡å‡€èµš</text>
        <text class="res-num text-warn">
          {{selectedStockObj.currency || ''}}{{suggestedProfit || '0.00'}}
        </text>
      </view>
    </view>
    <view class="cost-tips">
      æ€»æˆæœ¬: {{selectedStockObj.currency || ''}}{{buyCost || '0.00'}} (å«æ‰‹ç»­è´¹)
    </view>

  </view>
  <button class="btn-submit {{disabled ? 'disabled' : ''}}" bindtap="addTransaction" loading="{{disabled}}" disabled="{{disabled}}">
    {{disabled ? 'æ–°å¢ä¸­...' : 'è®°ä¸€ç¬”'}}
  </button>
</view>