<view class="container" style="transform: translateY({{(keyboardHeight > 0 && !isSearchFocus) ? -(keyboardHeight / 4) : 0}}px);">
  <view class="card stock-section">
  <view class="section-header-row">
    <view class="section-title">åç§°</view>
    
  </view>

  <view class="input-container" style="position: relative; z-index: 10;">
    
    <view class="input-wrap" bindtap="onInputFocus">
      <input 
        class="input" 
        type="text" 
        placeholder="æœç´¢åç§°/ä»£ç " 
        placeholder-class="ph-style" 
        value="{{inputName}}" 
        bindinput="onInputSearch"
        bindfocus="onInputFocus"
      />
      
      <view class="clear-icon" wx:if="{{inputName}}" catchtap="clearInput">âœ•</view>
    </view>

    <view class="search-dropdown" wx:if="{{searchResults.length > 0}}">
      <block wx:for="{{searchResults}}" wx:key="symbol">
        <view class="search-item" bindtap="selectStock" data-item="{{item}}">
          
          <view class="search-info">
            <text class="search-name">{{item.name}}</text>
            <text class="search-code">{{item.stockCode}}</text>
          </view>

          <view class="search-market tag {{item.code === 'US' ? 'blue' : (item.code === 'HK' ? 'red' : 'orange')}}">
            {{item.market}}
          </view>

        </view>
      </block>
    </view>
  </view>
  </view>
  <view class="card form-section">
    <view class="section-title-simple">ä¹°å…¥è¯¦æƒ…</view>
    <view class="form-row">
      <view class="form-col">
        <text class="label">å•ä»·</text>
        <view class="input-wrap">
          <text class="prefix">{{selectedStockObj ? selectedStockObj.currency : ''}}</text>
          <input class="input" type="digit" placeholder="0.00" value="{{price}}" data-field="price" bindinput="onInput"  bindfocus="onFormFocus" />
        </view>
      </view>
      <view class="form-col">
        <text class="label">æ•°é‡</text>
        <view class="input-wrap">
          <input class="input" type="digit" placeholder="0" value="{{qty}}" data-field="qty" bindinput="onInput"  bindfocus="onFormFocus" />
          <text class="suffix">è‚¡</text>
        </view>
      </view>
    </view>
    <view class="form-row mt-30">
      <view class="form-col">
        <text class="label">æ€»æ‰‹ç»­è´¹</text>
        <view class="input-wrap">
          <text class="prefix">{{selectedStockObj ? selectedStockObj.currency : ''}}</text>
          <input class="input" type="digit" placeholder="0.00" value="{{buyfee}}" data-field="buyfee" bindinput="onInput"  bindfocus="onFormFocus" />
        </view>
      </view>
      <view class="form-col">
        <text class="label">ç›®æ ‡å¢é•¿ç‡</text>
        <view class="input-wrap">
          <input class="input" type="digit" placeholder="10" value="{{rate}}" data-field="rate" bindinput="onInput"  bindfocus="onFormFocus" />
          <text class="suffix">%</text>
        </view>
      </view>
    </view>
  </view>
  <view class="card result-card {{suggestedSellPrice > 0 ? 'active' : ''}}">
    <view class="result-header">
      <text class="icon">ğŸ¯</text>
      <text>ç›®æ ‡ç­–ç•¥</text>
    </view>
    <view class="result-body row-between">
      <view class="result-item">
        <text class="res-label">å–å‡ºä»·</text>
        <text class="res-num text-primary">
          {{selectedStockObj.currency || ''}}{{suggestedSellPrice || '0.00'}}
        </text>
      </view>
      <view class="divider"></view>
      <view class="result-item text-right">
        <text class="res-label">é¢„è®¡å·®é¢</text>
        <text class="res-num text-warn">
          {{selectedStockObj.currency || ''}}{{suggestedProfit || '0.00'}}
        </text>
      </view>
    </view>
    <view class="cost-tips">
      æ€»æˆæœ¬: {{selectedStockObj.currency || ''}}{{buyCost || '0.00'}} (å«æ‰‹ç»­è´¹)
    </view>

  </view>
  <button class="btn-submit {{disabled ? 'disabled' : ''}}" bindtap="addTransaction" loading="{{disabled}}" disabled="{{disabled}}">
    {{disabled ? 'æ–°å¢ä¸­...' : 'è®°ä¸€ç¬”'}}
  </button>
</view>